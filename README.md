# Tape Sorting App

<details>
<summary><h2>Задание</h2></summary>

Устройство хранения данных типа лента (Tape) предназначено для последовательной записи и чтения данных. Считывающая/записывающая магнитная головка неподвижна во время чтения и записи, а лента имеет возможность двигаться в обоих направлениях. Запись и чтение информации возможны в ячейку ленты, на которой в данный момент находится магнитная головка.

Перемещения ленты – затратная по времени операция – лента не предназначена для произвольного доступа.

Имеется входная лента длины N (где N – велико), содержащая элементы типа int32. Имеется выходная лента такой же длины. Необходимо записать в выходную ленту отсортированные по возрастанию элементы с входной ленты. Есть ограничение по использованию оперативной памяти – не более M байт (M может быть < N, т.е. загрузить все данные с ленты в оперативную память не получится). Для реализации алгоритма можно использовать разумное количество временных лент, т.е. лент, на которых можно хранить какую-то временную информацию, необходимую в процессе работы алгоритма.

Необходимо создать проект С++, компилируемый в консольное приложение, которое реализует алгоритм сортировки данных с входной ленты на выходную.

- Определить интерфейс для работы с устройством типа лента
- Написать класс, реализующий этот интерфейс и эмулирующий работу с лентой посредством обычного файла
- Конфигурировать задержки через внешний файл (без перекомпиляции)
- Файлы временных лент сохранять в директорию tmp
- Реализовать алгоритм сортировки с ограничением памяти
- Написать юнит-тесты
</details>

## Подключение подмодулей
```bash
git submodule init
git submodule update
```

## Сборка и запуск  
```bash
cmake -B build && cmake --build build  
./build/tape-sorting-app <input_file> <output_file> <config_file> <memory_limit>
```

## Пример работы  
```
./build/tape-sorting-app ex_input.txt ex_output.txt config.json 6
```

**ex_input.txt**: `7 -3 12 0 -8 15 -1 4 -11 9 2 -5 13 -9 6 7 -3 0 -8 15 4 -11 2 13 6 -5 9 -1 12 -9 15`  
**ex_output.txt**: `-11 -11 -9 -9 -8 -8 -5 -5 -3 -3 -1 -1 0 0 2 2 4 4 6 6 7 7 9 9 12 12 13 13 15 15 15 `

## Тестирование
```bash
cd test
cmake -B build && cmake --build build
./build/test
```

## Конфигурация JSON
```json
{
    "read_delay_ms": 0,
    "write_delay_ms": 0,
    "move_delay_ms": 0
}
```

## Имплементация
`TapeSortingApp` - управление всем процессом сортировки, ввода и вывода  
`Tape` - контейнер с управлением позицией каретки  
`iTapeHandler` - интерфейс для работы с `Tape`  
`FileTapeHandler` - эмулятор работы с `Tape` посредством файла (наследуется от `iTapeHandler`)  
`TapeSorter` - сортировщик лент в оперативной памяти (использует *selection sort*)
